name: Run tests with workflow_call

on: 
  workflow_dispatch:
    inputs:
      package:
        description: "Package to test"
        required: true
        type: choice
        options:
          - qpay-customer-ui
          - qpay-ui

  schedule:
    - cron: 25 9 * * *
    - cron: 30 9 * * *

jobs:
  test:
    name: "Run E2E tests"
    uses: ./.github/workflows/mochawesome.yaml
    secrets: inherit
    with:
      package-name: >-
        ${{ inputs.package
          || (github.event.schedule == '25 7 * * *' && 'qpay-ui')
          || (github.event.schedule == '30 7 * * *' && 'qpay-customer-ui') 
        }}
